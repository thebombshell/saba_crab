[gd_scene load_steps=27 format=3 uid="uid://c0hgkupsei64e"]

[ext_resource type="PackedScene" uid="uid://cbdknkk5fy66p" path="res://models/fish_spirit/fishspirit.glb" id="1_6uhlw"]
[ext_resource type="Script" uid="uid://bjgeh4vshhqa6" path="res://actors/fish_spirit/fish_spirit.gd" id="1_ubsn6"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_6uhlw"]
animation = &"LookUp"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ubsn6"]
animation = &"LookDown"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_hfhg7"]
animation = &"LookLeft"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_vweki"]
animation = &"LookRight"

[sub_resource type="AnimationNodeBlendSpace2D" id="AnimationNodeBlendSpace2D_ubsn6"]
blend_point_0/node = SubResource("AnimationNodeAnimation_6uhlw")
blend_point_0/pos = Vector2(0, 1)
blend_point_1/node = SubResource("AnimationNodeAnimation_ubsn6")
blend_point_1/pos = Vector2(0, -1)
blend_point_2/node = SubResource("AnimationNodeAnimation_hfhg7")
blend_point_2/pos = Vector2(-1, 0)
blend_point_3/node = SubResource("AnimationNodeAnimation_vweki")
blend_point_3/pos = Vector2(1, 0)

[sub_resource type="AnimationNodeAdd2" id="AnimationNodeAdd2_hfhg7"]
filters = ["FishSpritiSkeleton/Skeleton3D:Ear1.L", "FishSpritiSkeleton/Skeleton3D:Ear1.R", "FishSpritiSkeleton/Skeleton3D:Ear2.L", "FishSpritiSkeleton/Skeleton3D:Ear2.R", "FishSpritiSkeleton/Skeleton3D:Eye.L", "FishSpritiSkeleton/Skeleton3D:Eye.R", "FishSpritiSkeleton/Skeleton3D:HairBack", "FishSpritiSkeleton/Skeleton3D:HairBack.L", "FishSpritiSkeleton/Skeleton3D:HairBack.R", "FishSpritiSkeleton/Skeleton3D:HairBang1.L", "FishSpritiSkeleton/Skeleton3D:HairBang1.R", "FishSpritiSkeleton/Skeleton3D:HairBang2.L", "FishSpritiSkeleton/Skeleton3D:HairBang2.R", "FishSpritiSkeleton/Skeleton3D:HairFringe", "FishSpritiSkeleton/Skeleton3D:HairTail", "FishSpritiSkeleton/Skeleton3D:Head"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_nm6ut"]
animation = &"Jump"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_absab"]
animation = &"Fall"

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_vweki"]
blend_point_0/node = SubResource("AnimationNodeAnimation_nm6ut")
blend_point_0/pos = 1.0
blend_point_1/node = SubResource("AnimationNodeAnimation_absab")
blend_point_1/pos = -1.0

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_lqhyu"]
animation = &"Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_fqn6v"]
animation = &"WalkForward"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_o5tvn"]
animation = &"RunForward"

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_3qr8t"]
blend_point_0/node = SubResource("AnimationNodeAnimation_lqhyu")
blend_point_0/pos = 0.0
blend_point_1/node = SubResource("AnimationNodeAnimation_fqn6v")
blend_point_1/pos = 1.0
blend_point_2/node = SubResource("AnimationNodeAnimation_o5tvn")
blend_point_2/pos = 8.0
max_space = 10.0

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_avjtj"]
animation = &"Sit"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_g5lrh"]
animation = &"SitIdle"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_drpbo"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_pafnd"]
xfade_time = 0.05
advance_mode = 2
advance_condition = &"is_on_ground"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_gxp5y"]
xfade_time = 0.05
advance_mode = 2
advance_expression = "!get(\"parameters/StateMachine/conditions/is_on_ground\")"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_txa26"]
xfade_time = 0.05
advance_mode = 2
advance_condition = &"is_sitting"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ju6q3"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_uhjjb"]
xfade_time = 0.1
advance_mode = 2
advance_expression = "!get(\"parameters/StateMachine/conditions/is_sitting\")"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_uubo6"]
states/InAir/node = SubResource("AnimationNodeBlendSpace1D_vweki")
states/InAir/position = Vector2(490.074, 100.444)
states/OnGround/node = SubResource("AnimationNodeBlendSpace1D_3qr8t")
states/OnGround/position = Vector2(490.938, 278.667)
states/Sit/node = SubResource("AnimationNodeAnimation_avjtj")
states/Sit/position = Vector2(643.333, 279.259)
states/SitIdle/node = SubResource("AnimationNodeAnimation_g5lrh")
states/SitIdle/position = Vector2(642.222, 383.556)
transitions = ["Start", "InAir", SubResource("AnimationNodeStateMachineTransition_drpbo"), "InAir", "OnGround", SubResource("AnimationNodeStateMachineTransition_pafnd"), "OnGround", "InAir", SubResource("AnimationNodeStateMachineTransition_gxp5y"), "OnGround", "Sit", SubResource("AnimationNodeStateMachineTransition_txa26"), "Sit", "SitIdle", SubResource("AnimationNodeStateMachineTransition_ju6q3"), "SitIdle", "OnGround", SubResource("AnimationNodeStateMachineTransition_uhjjb")]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_uawip"]
graph_offset = Vector2(-453.333, -14.6667)
nodes/HeadLook/node = SubResource("AnimationNodeBlendSpace2D_ubsn6")
nodes/HeadLook/position = Vector2(-213.333, 306.667)
nodes/HeadSwivel/node = SubResource("AnimationNodeAdd2_hfhg7")
nodes/HeadSwivel/position = Vector2(66.6667, 146.667)
nodes/StateMachine/node = SubResource("AnimationNodeStateMachine_uubo6")
nodes/StateMachine/position = Vector2(-266.667, 40)
node_connections = [&"HeadSwivel", 0, &"StateMachine", &"HeadSwivel", 1, &"HeadLook", &"output", 0, &"HeadSwivel"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_6uhlw"]
radius = 1.0
height = 3.2

[node name="FishSpirit" type="CharacterBody3D"]
script = ExtResource("1_ubsn6")

[node name="fishspirit" parent="." instance=ExtResource("1_6uhlw")]

[node name="Skeleton3D" parent="fishspirit/FishSpritiSkeleton" index="0"]
bones/1/position = Vector3(0.0229774, -0.295989, -1.13834)
bones/1/rotation = Quaternion(-0.707107, 7.85046e-17, 7.85046e-17, 0.707107)
bones/2/rotation = Quaternion(-0.662314, 0.0230695, 0.0204106, 0.748593)
bones/3/rotation = Quaternion(-0.0948013, 0.026864, 0.00646736, 0.995113)
bones/4/rotation = Quaternion(0.058897, -0.0151843, -0.173605, 0.982935)
bones/5/rotation = Quaternion(0.0311519, 0.0126722, 0.0660246, 0.997251)
bones/6/rotation = Quaternion(0.0179732, 7.77021e-06, 0.00807004, 0.999806)
bones/7/rotation = Quaternion(-0.0111319, 0.000401987, 0.00855308, 0.999901)
bones/8/rotation = Quaternion(-0.0810215, -0.022105, -0.0767367, 0.993508)
bones/9/rotation = Quaternion(0.0189956, 0.02667, 0.172162, 0.984524)
bones/10/rotation = Quaternion(-0.00896436, -0.0021567, -0.0659504, 0.99778)
bones/11/rotation = Quaternion(-0.00598758, 2.1585e-05, -0.0071556, 0.999956)
bones/12/rotation = Quaternion(0.00478584, -9.1231e-05, -0.00756326, 0.99996)
bones/13/rotation = Quaternion(0.560393, -0.372631, 0.595371, -0.438906)
bones/14/rotation = Quaternion(-0.0529515, 0.00952346, 0.36929, 0.927755)
bones/15/rotation = Quaternion(-0.299906, -0.627886, -0.264514, 0.667718)
bones/16/rotation = Quaternion(-0.558961, -0.392957, 0.579066, 0.444782)
bones/17/rotation = Quaternion(-0.0550472, -0.00884665, -0.363548, 0.929906)
bones/18/rotation = Quaternion(-0.289739, 0.631815, 0.254846, 0.672246)
bones/19/rotation = Quaternion(0.636037, -0.00696527, 0.00574149, 0.771606)
bones/20/rotation = Quaternion(-0.180774, 0.00046801, -0.00186662, 0.983523)
bones/21/rotation = Quaternion(0.893333, 0.0920872, -0.041839, 0.437866)
bones/22/rotation = Quaternion(-0.21472, 0.919193, -0.329795, 0.0146373)
bones/23/rotation = Quaternion(-0.0611392, -0.699709, 0.0127472, 0.711693)
bones/24/rotation = Quaternion(0.910761, -0.128373, 0.0707462, 0.386044)
bones/25/rotation = Quaternion(0.245101, 0.883086, -0.399737, -0.0172029)
bones/26/rotation = Quaternion(-0.0617124, 0.700476, 0.0104681, 0.710926)
bones/27/position = Vector3(-0.0153389, 0.511353, 0.916709)
bones/27/rotation = Quaternion(0.716192, 0.000184687, -0.00014658, 0.697903)
bones/28/rotation = Quaternion(-0.747072, -0.0744277, -0.115415, 0.650403)
bones/29/rotation = Quaternion(0.194452, 0.0187865, -0.0503023, 0.979441)
bones/30/position = Vector3(0.439564, -0.0546871, -1.41901)
bones/31/rotation = Quaternion(-0.755697, 0.0754978, 0.132223, 0.636976)
bones/32/rotation = Quaternion(0.233605, -0.0270662, 0.100389, 0.966756)
bones/33/position = Vector3(-0.507189, -0.0538902, -1.3871)
bones/34/position = Vector3(-0.431791, -0.0641765, -0.481792)
bones/34/rotation = Quaternion(-0.472118, 0.525969, 0.481856, 0.517953)
bones/35/rotation = Quaternion(-0.0257162, -0.0760511, 0.0646036, -0.994677)
bones/36/rotation = Quaternion(-0.0263029, 0.0760284, -0.0653, -0.994617)
bones/37/position = Vector3(-9.97676e-10, 0.483424, -0.582391)
bones/37/rotation = Quaternion(0.670234, -0.00776788, 0.00703221, 0.742076)
bones/38/position = Vector3(-5.30261e-09, -0.392027, -0.452265)
bones/38/rotation = Quaternion(0.970691, -2.86901e-08, -1.15804e-07, 0.240333)
bones/39/position = Vector3(0.394842, -0.278608, -0.25618)
bones/39/rotation = Quaternion(0.785542, 0.413275, 0.4373, 0.144559)
bones/40/position = Vector3(-0.394842, -0.278608, -0.25618)
bones/40/rotation = Quaternion(0.785542, -0.413275, -0.4373, 0.144559)
bones/41/rotation = Quaternion(0.569743, -0.465247, -0.519948, 0.434273)
bones/42/rotation = Quaternion(-0.110494, 0.66574, 0.388658, 0.627317)
bones/43/rotation = Quaternion(0.567161, 0.462565, 0.52347, 0.436282)
bones/44/rotation = Quaternion(-0.131945, -0.677244, -0.364205, 0.625529)
bones/45/position = Vector3(0.491548, 0.766579, -5.04957)
bones/45/rotation = Quaternion(-0.707107, 7.85046e-17, -7.85046e-17, 0.707107)
bones/46/position = Vector3(-0.491548, 0.273327, -5.04957)
bones/46/rotation = Quaternion(-0.707107, 7.85046e-17, -7.85046e-17, 0.707107)
bones/47/position = Vector3(0.491548, 0.773305, -4.79957)
bones/47/rotation = Quaternion(-0.707107, 7.85046e-17, -7.85046e-17, 0.707107)
bones/48/position = Vector3(-0.491548, 0.266601, -4.79957)
bones/48/rotation = Quaternion(-0.707107, 7.85046e-17, -7.85046e-17, 0.707107)
bones/49/position = Vector3(0.491548, 0.702152, -4.54957)
bones/49/rotation = Quaternion(-0.707107, 7.85046e-17, -7.85046e-17, 0.707107)
bones/50/position = Vector3(-0.491548, 0.335872, -4.54957)
bones/50/rotation = Quaternion(-0.707107, 7.85046e-17, -7.85046e-17, 0.707107)
bones/51/position = Vector3(0.991547, 0.587621, -4.29957)
bones/51/rotation = Quaternion(-0.707107, 7.85046e-17, -7.85046e-17, 0.707107)
bones/52/position = Vector3(-0.991548, 0.45239, -4.29957)
bones/52/rotation = Quaternion(-0.707107, 7.85046e-17, -7.85046e-17, 0.707107)
bones/53/position = Vector3(1.49155, 0.457172, -4.04957)
bones/53/rotation = Quaternion(-0.707107, 7.85046e-17, -7.85046e-17, 0.707107)
bones/54/position = Vector3(-1.49155, 0.584466, -4.04957)
bones/54/rotation = Quaternion(-0.707107, 7.85046e-17, -7.85046e-17, 0.707107)
bones/55/position = Vector3(0.012942, 3.62072, -1.41328)
bones/56/position = Vector3(0.326624, -0.82133, -0.00400946)
bones/56/rotation = Quaternion(0.0101526, 1.41273e-09, 0.0676874, 0.997655)
bones/57/position = Vector3(-0.316362, -0.82133, -0.00247022)
bones/57/rotation = Quaternion(0.00622707, -7.84831e-10, -0.0415159, 0.999118)
bones/58/position = Vector3(0.208617, 0.0166577, -0.040004)
bones/58/rotation = Quaternion(0.0776763, 5.02315e-24, -4.53673e-17, 0.996979)
bones/59/position = Vector3(-0.208617, 0.0173989, -0.065205)
bones/59/rotation = Quaternion(0.12664, 2.71438e-24, -2.09977e-24, 0.991949)
bones/60/position = Vector3(0.012942, 4.62072, -1.41328)

[node name="AnimationTree" type="AnimationTree" parent="."]
root_node = NodePath("../fishspirit")
tree_root = SubResource("AnimationNodeBlendTree_uawip")
anim_player = NodePath("../fishspirit/AnimationPlayer")
parameters/HeadLook/blend_position = Vector2(-0.00258845, -0.00411522)
parameters/HeadSwivel/add_amount = 1.0
parameters/StateMachine/conditions/is_on_ground = true
parameters/StateMachine/conditions/is_sitting = false
parameters/StateMachine/InAir/blend_position = -0.740496
parameters/StateMachine/OnGround/blend_position = -0.0181818

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 1, -0.126)
shape = SubResource("CapsuleShape3D_6uhlw")

[editable path="fishspirit"]
